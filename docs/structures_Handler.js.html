

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: structures/Handler.js | Patron.js 3.1.0</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 61px; height: 13px">
        
            <a href="https://github.com/vim2meta/patron.js" rel="noopener noreferrer" target="_blank">
                <img src="https://i.imgur.com/6j61q1V.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Patron.js 3.1.0</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Argument.html">Argument</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Argument_sub"></div></li><li><a href="ArgumentPrecondition.html">ArgumentPrecondition</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ArgumentPrecondition_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ArgumentPrecondition.html#run">run</a></li></ul></div></li><li><a href="ArgumentResult.html">ArgumentResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ArgumentResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ArgumentResult.html#.fromInvalidCount">fromInvalidCount</a></li><li><a href="ArgumentResult.html#.fromSuccess">fromSuccess</a></li></ul></div></li><li><a href="Command.html">Command</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Command_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Command.html#getExample">getExample</a></li><li><a href="Command.html#getUsage">getUsage</a></li><li><a href="Command.html#revertCooldown">revertCooldown</a></li><li><a href="Command.html#run">run</a></li><li><a href="Command.html#updateCooldown">updateCooldown</a></li></ul></div></li><li><a href="CommandResult.html">CommandResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CommandResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CommandResult.html#.fromError">fromError</a></li><li><a href="CommandResult.html#.fromUnknown">fromUnknown</a></li><li><a href="CommandResult.html#setCommand">setCommand</a></li></ul></div></li><li><a href="Cooldown.html">Cooldown</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Cooldown_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Cooldown.html#get">get</a></li><li><a href="Cooldown.html#revert">revert</a></li><li><a href="Cooldown.html#use">use</a></li></ul></div></li><li><a href="CooldownResult.html">CooldownResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CooldownResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CooldownResult.html#.fromError">fromError</a></li></ul></div></li><li><a href="ExceptionResult.html">ExceptionResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ExceptionResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ExceptionResult.html#.fromError">fromError</a></li></ul></div></li><li><a href="Group.html">Group</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Group_sub"></div></li><li><a href="Handler.html">Handler</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Handler_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Handler.html#parseArguments">parseArguments</a></li><li><a href="Handler.html#parseCommand">parseCommand</a></li><li><a href="Handler.html#revertCooldown">revertCooldown</a></li><li><a href="Handler.html#run">run</a></li><li><a href="Handler.html#runCommandPostconditions">runCommandPostconditions</a></li><li><a href="Handler.html#runCommandPreconditions">runCommandPreconditions</a></li><li><a href="Handler.html#updateCooldown">updateCooldown</a></li><li><a href="Handler.html#validateCommand">validateCommand</a></li></ul></div></li><li><a href="InvalidContextResult.html">InvalidContextResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="InvalidContextResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="InvalidContextResult.html#.fromError">fromError</a></li></ul></div></li><li><a href="MultiMutex.html">MultiMutex</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MultiMutex_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MultiMutex.html#sync">sync</a></li></ul></div></li><li><a href="Mutex.html">Mutex</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Mutex_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Mutex.html#sync">sync</a></li></ul></div></li><li><a href="PermissionResult.html">PermissionResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PermissionResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PermissionResult.html#.fromBot">fromBot</a></li><li><a href="PermissionResult.html#.fromMember">fromMember</a></li><li><a href="PermissionResult.html#format">format</a></li></ul></div></li><li><a href="Postcondition.html">Postcondition</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Postcondition_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Postcondition.html#run">run</a></li></ul></div></li><li><a href="Precondition.html">Precondition</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Precondition_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Precondition.html#run">run</a></li></ul></div></li><li><a href="PreconditionResult.html">PreconditionResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PreconditionResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PreconditionResult.html#.fromError">fromError</a></li><li><a href="PreconditionResult.html#.fromSuccess">fromSuccess</a></li></ul></div></li><li><a href="Registry.html">Registry</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Registry_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Registry.html#registerArgumentPreconditions">registerArgumentPreconditions</a></li><li><a href="Registry.html#registerCommands">registerCommands</a></li><li><a href="Registry.html#registerGlobalTypeReaders">registerGlobalTypeReaders</a></li><li><a href="Registry.html#registerGroups">registerGroups</a></li><li><a href="Registry.html#registerLibraryTypeReaders">registerLibraryTypeReaders</a></li><li><a href="Registry.html#registerPostconditions">registerPostconditions</a></li><li><a href="Registry.html#registerPreconditions">registerPreconditions</a></li><li><a href="Registry.html#registerTypeReaders">registerTypeReaders</a></li><li><a href="Registry.html#unregisterArgumentPreconditions">unregisterArgumentPreconditions</a></li><li><a href="Registry.html#unregisterCommands">unregisterCommands</a></li><li><a href="Registry.html#unregisterGlobalTypeReaders">unregisterGlobalTypeReaders</a></li><li><a href="Registry.html#unregisterGroups">unregisterGroups</a></li><li><a href="Registry.html#unregisterLibraryTypeReaders">unregisterLibraryTypeReaders</a></li><li><a href="Registry.html#unregisterPostconditions">unregisterPostconditions</a></li><li><a href="Registry.html#unregisterPreconditions">unregisterPreconditions</a></li><li><a href="Registry.html#unregisterTypeReaders">unregisterTypeReaders</a></li></ul></div></li><li><a href="Result.html">Result</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Result_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Result.html#.fromSuccess">fromSuccess</a></li></ul></div></li><li><a href="TypeReader.html">TypeReader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TypeReader_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="TypeReader.html#read">read</a></li></ul></div></li><li><a href="TypeReaderResult.html">TypeReaderResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TypeReaderResult_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="TypeReaderResult.html#.fromError">fromError</a></li><li><a href="TypeReaderResult.html#.fromSuccess">fromSuccess</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#ArgumentDefault">ArgumentDefault</a></li><li class="hidden"><a href="global.html#ArgumentOptions">ArgumentOptions</a></li><li class="hidden"><a href="global.html#ArgumentPreconditionOptions">ArgumentPreconditionOptions</a></li><li class="hidden"><a href="global.html#ArgumentResultOptions">ArgumentResultOptions</a></li><li><a href="global.html#CommandError">CommandError</a></li><li class="hidden"><a href="global.html#CommandOptions">CommandOptions</a></li><li class="hidden"><a href="global.html#CommandResultOptions">CommandResultOptions</a></li><li><a href="global.html#Context">Context</a></li><li class="hidden"><a href="global.html#CooldownOptions">CooldownOptions</a></li><li class="hidden"><a href="global.html#CooldownResultOptions">CooldownResultOptions</a></li><li class="hidden"><a href="global.html#ExceptionResultOptions">ExceptionResultOptions</a></li><li class="hidden"><a href="global.html#GroupOptions">GroupOptions</a></li><li class="hidden"><a href="global.html#HandlerOptions">HandlerOptions</a></li><li class="hidden"><a href="global.html#InvalidContextResultOptions">InvalidContextResultOptions</a></li><li><a href="global.html#Library">Library</a></li><li class="hidden"><a href="global.html#PermissionResultOptions">PermissionResultOptions</a></li><li class="hidden"><a href="global.html#PostconditionOptions">PostconditionOptions</a></li><li class="hidden"><a href="global.html#PreconditionOptions">PreconditionOptions</a></li><li class="hidden"><a href="global.html#RegistryOptions">RegistryOptions</a></li><li><a href="global.html#RequireAll">RequireAll</a></li><li class="hidden"><a href="global.html#ResultOptions">ResultOptions</a></li><li><a href="global.html#TypeReaderCategory">TypeReaderCategory</a></li><li class="hidden"><a href="global.html#TypeReaderOptions">TypeReaderOptions</a></li><li class="hidden"><a href="global.html#TypeReaderResultOptions">TypeReaderResultOptions</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * patron.js - The cleanest command framework for discord.js and eris.
 * Copyright (c) 2018 patron.js contributors
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see &lt;http://www.gnu.org/licenses/>.
 */
"use strict";
const ArgumentDefault = require("../enums/ArgumentDefault.js");
const ArgumentResult = require("../results/ArgumentResult.js");
const CommandResult = require("../results/CommandResult.js");
const Constants = require("../utility/Constants.js");
const CooldownResult = require("../results/CooldownResult.js");
const ExceptionResult = require("../results/ExceptionResult.js");
const Registry = require("./Registry.js");
const Result = require("../results/Result.js");

/**
 * The command handler.
 * @prop {RegExp} argumentRegex The regex used to parse arguments from
 * messages.
 * @prop {Registry} registry The registry used to store the commands.
 */
class Handler {
  /**
   * @typedef {object} HandlerOptions The handler options.
   * @prop {RegExp} [argumentRegex=/"[\S\s]+?"|[\S\n]+/g] The regex used to
   * parse arguments from messages.
   * @prop {Registry} registry The registry used to store the commands.
   */

  /**
   * @param {HandlerOptions} options The handler options.
   */
  constructor(options) {
    this.registry = options.registry;

    if (options.argumentRegex == null) {
      this.argumentRegex = Constants.regexes.argument;
      this.hasDefaultRegex = true;
    } else {
      this.argumentRegex = options.argumentRegex;
      this.hasDefaultRegex = this.argumentRegex === Constants.regexes.argument;
    }

    this.constructor.validateHandler(this);
  }

  /**
   * Attempts to parse a Command.
   * @param {Message} message The received message.
   * @param {number} prefixLength The length of the prefix to use when handling
   * the command.
   * @returns {Promise&lt;Result>} The result of the command parsing.
   */
  async parseCommand(message, prefixLength) {
    const content = message.content.slice(prefixLength);
    const split = content.match(this.argumentRegex);

    if (split == null
        || content.match(Constants.regexes.startWhitespace) != null)
      return CommandResult.fromUnknown("");

    const command = this.registry.commands.find(
      cmd => cmd.names.some(name => this.registry.equals(name, split[0]))
    );

    if (command == null)
      return CommandResult.fromUnknown(split[0]);

    return Result.fromSuccess(command);
  }

  /**
   * Attempts to validate a Command.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @returns {Promise&lt;InvalidContextResult|Result>} The result of the command
   * validation.
   */
  async validateCommand(message, command) {
    let result = this.registry.libraryHandler.validateContext(
      command,
      message
    );

    if (result != null)
      return result;

    result = this.registry.libraryHandler.validatePermissions(
      command,
      message
    );

    if (result != null)
      return result;

    return Result.fromSuccess(command);
  }

  /**
   * Attempts to run the Preconditions registered to a Command.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @returns {Promise&lt;PreconditionResult|Result>} The result of running the
   * preconditions.
   */
  async runCommandPreconditions(message, command) {
    for (let i = 0; i &lt; command.group.preconditions.length; i++) {
      const result = await command.group.preconditions[i].run(
        command,
        message,
        command.group.preconditionOptions[i]
      );

      if (!result.success)
        return result;
    }

    for (let i = 0; i &lt; command.preconditions.length; i++) {
      const result = await command.preconditions[i].run(
        command,
        message,
        command.preconditionOptions[i]
      );

      if (!result.success)
        return result;
    }

    return Result.fromSuccess(command);
  }

  /**
   * Attempts to run the Postconditions registered to a Command.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @param {?CommandResult} result The command result.
   */
  async runCommandPostconditions(message, command, result) {
    if (result instanceof CommandResult)
      result.setCommand(command);

    for (let i = 0; i &lt; command.group.postconditions.length; i++) {
      await command.group.postconditions[i].run(
        message,
        result,
        command.group.postconditionOptions[i]
      );
    }

    for (let i = 0; i &lt; command.postconditions.length; i++) {
      await command.postconditions[i].run(
        message,
        result,
        command.postconditionOptions[i]
      );
    }
  }

  /**
   * Attempts to update a Command's cooldown.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @returns {Promise&lt;CooldownResult|Result>} The result of checking
   * the cooldowns.
   */
  async updateCooldown(message, command) {
    const guild = this.registry.libraryHandler.guild(message);
    let cooldown = await command.updateCooldown(
      message.author.id,
      guild == null ? null : guild.id
    );

    if (!cooldown)
      return Result.fromSuccess(command);

    cooldown = await command.cooldowns.get(message.author.id, guild);

    return CooldownResult.fromError(command, cooldown.time - Date.now());
  }

  async parseInfiniteArg(message, command, i, args, split, value) {
    const input = split;

    if (input.length === 0) {
      if (command.args[i].optional)
        return this.defaultValue(command.args[i].defaultValue, message);

      return ArgumentResult.fromInvalidCount(command);
    }

    for (let j = 0; j &lt; input.length; j++) {
      if (this.hasDefaultRegex)
        input[j] = input[j].replace(Constants.regexes.quotes, "");

      const typeReaderResult = await command.args[i].typeReader.read(
        command,
        message,
        command.args[i],
        args,
        input[j]
      );

      if (!typeReaderResult.success)
        return typeReaderResult;

      value.push(typeReaderResult.value);
    }
  }

  async parseFiniteArg(message, command, i, args, content, split) {
    let input = content;
    let newContent = content;

    if (!command.args[i].remainder) {
      input = split.shift();

      if (input != null) {
        if (split.length > 0)
          newContent = content.slice(content.indexOf(split[0], input.length));
        else
          newContent = "";
      }
    }

    if (this.hasDefaultRegex)
      input = input.replace(Constants.regexes.quotes, "");

    if (input == null || input === "") {
      if (command.args[i].optional) {
        return {
          content: newContent,
          input,
          value: this.defaultValue(command.args[i].defaultValue, message)
        };
      }

      return {
        content: newContent,
        input,
        value: ArgumentResult.fromInvalidCount(command)
      };
    }

    const result = await command.args[i].typeReader.read(
      command,
      message,
      command.args[i],
      args,
      input
    );

    return {
      content: newContent,
      input,
      value: result.value
    };
  }

  async runArgPreconditions(message, command, i, args, value) {
    for (let j = 0; j &lt; command.args[i].preconditions.length; j++) {
      const preconditionResult = await command.args[i].preconditions[j].run(
        command,
        message,
        command.args[i],
        args,
        value,
        command.args[i].preconditionOptions[j]
      );

      if (!preconditionResult.success)
        return preconditionResult;
    }
  }

  /**
   * Attempts to parse Arguments.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @param {number} prefixLength The length of the prefix to use when handling
   * the command.
   * @returns {Promise&lt;ArgumentResult|PreconditionResult|TypeReaderResult>} The
   * result of the argument parsing.
   */
  async parseArguments(msg, cmd, prefixLength) {
    const args = {};
    let cnt = msg.content.slice(prefixLength);
    let split = cnt.match(this.argumentRegex);

    if (split.length > 1)
      cnt = cnt.slice(cnt.indexOf(split[1], split[0].length));
    else
      cnt = "";

    split = split.slice(1);

    for (let i = 0; i &lt; cmd.args.length; i++) {
      let val = [];

      if (cmd.args[i].infinite) {
        const res = await this.parseInfiniteArg(msg, cmd, i, args, split, val);

        if (res != null) {
          if (res.success === false)
            return res;

          val = res;
        }
      } else {
        const res = await this.parseFiniteArg(msg, cmd, i, args, cnt, split);

        ({value: val} = res);
        cnt = res.newContent;

        if (res.value.success === false)
          return res.value;
      }

      const res = await this.runArgPreconditions(msg, cmd, i, args, val);

      if (res != null)
        return res;

      args[cmd.args[i].key] = val;
    }

    return ArgumentResult.fromSuccess(cmd, args);
  }

  /**
   * Attempts to revert a Command's cooldown.
   * @param {Message} message The received message.
   * @param {Command} command The parsed command.
   * @returns {Promise} Resolves once the cooldown has been reverted.
   */
  async revertCooldown(message, command) {
    const guild = this.registry.libraryHandler.guild(message);

    await command.revertCooldown(
      message.author.id,
      guild == null ? null : guild.id
    );
  }

  /**
   * Attempts to execute a command.
   * @param {Message} message The received message.
   * @param {number} prefixLength The length of the prefix to use when handling
   * the command.
   * @returns {Promise&lt;ArgumentResult|CooldownResult|PreconditionResult
   * |TypeReaderResult|ExceptionResult|Result>} The result of the command
   * execution.
   */
  async run(message, prefixLength) {
    let result = await this.parseCommand(message, prefixLength);

    if (!result.success)
      return result;

    const {command} = result;

    result = await this.internalRun(message, command, prefixLength);
    await this.runCommandPostconditions(message, command, result);

    if (!(result instanceof Result))
      result = Result.fromSuccess(command);

    return result;
  }

  async internalRun(message, command, prefixLength) {
    let result = await this.validateCommand(message, command);

    if (!result.success)
      return result;

    result = await this.updateCooldown(message, command);

    if (!result.success)
      return result;

    try {
      result = await this.runCommandPreconditions(message, command);

      if (!result.success) {
        await this.revertCooldown(message, command);

        return result;
      }

      result = await this.parseArguments(message, command, prefixLength);

      if (!result.success) {
        await this.revertCooldown(message, command);

        return result;
      }

      result = await command.run(message, result.args);
    } catch (err) {
      await this.revertCooldown(message, command);

      return ExceptionResult.fromError(command, err);
    }

    if (result instanceof CommandResult)
      await this.revertCooldown(message, command);

    return result;
  }

  defaultValue(defaultValue, message) {
    switch (defaultValue) {
      case ArgumentDefault.Author:
        return message.author;
      case ArgumentDefault.Message:
        return message;
      case ArgumentDefault.Member:
        return message.member;
      case ArgumentDefault.Channel:
        return message.channel;
      case ArgumentDefault.Guild:
        return message.guild;
      case ArgumentDefault.HighestRole:
        return this.registry.libraryHandler.highestRole(message);
      default:
        return defaultValue;
    }
  }

  static validateHandler(handler) {
    if (!(handler.registry instanceof Registry)) {
      throw new TypeError(
        "Handler: The registry must be an instance of the Registry class."
      );
    } else if (!(handler.argumentRegex instanceof RegExp)) {
      throw new TypeError(
        "Handler: The argument regex must be a regular expression."
      );
    }
  }
}

module.exports = Handler;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://i.imgur.com/6j61q1V.png" style="width: 61px; height: 13px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
